% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/diagnosis.R
\name{diagnosis}
\alias{diagnosis}
\title{Extract diagnosis phenotype from diagnosis rows.}
\usage{
diagnosis(
  diagnoses,
  concept,
  params = NULL,
  patient_id_col = "patient_id",
  code_col = "code",
  system_col = "code_type",
  date_col = "diagnosis_date",
  return_separate = FALSE,
  target_env = parent.frame()
)
}
\arguments{
\item{diagnoses}{Dataset imported from a database or csv file.}

\item{concept}{Concept to look for. For breast cancer, specify "bc".}

\item{params}{NULL, a named list, or a positional list (lookback_start, lookback_end, min_occurrences).
Date-like inputs are coerced internally.}

\item{patient_id_col}{Name of the patient_id column in the \code{diagnoses} dataset.}

\item{code_col}{Name of the code column in the \code{diagnoses} dataset.}

\item{system_col}{Name of the code_type column in the \code{diagnoses} dataset.}

\item{date_col}{Name of the diagnosis_date column in the \code{diagnoses} dataset.}

\item{return_separate}{Logical. If TRUE assign \code{patient_level}, \code{evidence}, \code{metadata} into \code{target_env} and return invisibly NULL.}

\item{target_env}{Environment in which to place separate data frames when return_separate = TRUE. Defaults to parent.frame().}
}
\description{
Inputs:
\itemize{
\item diagnoses: tibble with the following columns: patient_id, code, code_system, date (Date).
\item concept_set: tibble with the following columns: code, code_system, include (logical TRUE=include, FALSE=exclude).
\item params: list(lookback_start, lookback_end, min_occurrences)
}
}
\details{
Output: list(patient_level, evidence, metadata) by default. If return_separate = TRUE,
the function assigns three objects into \code{target_env} named \code{patient_level}, \code{evidence}, and \code{metadata}
and returns invisibly NULL.
}
